// lib/memory/insertMemory.ts

import { supabase } from "@/lib/supabase/browser-client"

type InsertMemoryParams = {
  project: string
  content: string
  tags?: string[]
  category?: string
}

export async function insertMemory({
  project,
  content,
  tags = [],
  category = "default"
}: InsertMemoryParams) {
  try {
    const { data, error } = await supabase.from("memory").insert([
      {
        project_name: project,
        content: content,
        tags: tags.join(","),
        category: category,
      },
    ])

    if (error) {
      console.error("❌ Memory insert failed:", error)
    } else {
      console.log("✅ Memory saved:", data)
    }
  } catch (err) {
    console.error("❌ Unexpected error while saving memory:", err)
  }
}
